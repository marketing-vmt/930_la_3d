<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>KeyShotXR Mobile</title>
    <style type="text/css">
      * {
        box-sizing: border-box;
      }
      
      body {
        margin: 0;
        padding: 0;
        background: transparent;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        overflow-x: hidden;
        -ms-touch-action: none;
        touch-action: manipulation;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }
      
      .container {
        width: 100%;
        max-width: min(95vw, 95vh);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 10px;
        animation: slideInFromLeft 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        opacity: 0;
        transform: translateX(-100px);
      }
      
      @keyframes slideInFromLeft {
        0% {
          opacity: 0;
          transform: translateX(-100px);
        }
        60% {
          opacity: 0.8;
          transform: translateX(10px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }
      
      #KeyShotXR {
        width: 100%;
        height: auto;
        aspect-ratio: 1;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        background: transparent;
        overflow: hidden;
        position: relative;
      }
      
      #controls {
        margin-top: 20px;
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        width: 100%;
      }
      
      .zoom-button {
        padding: 12px 24px;
        font-size: 16px;
        font-weight: 600;
        border: none;
        background: rgba(68, 68, 68, 0.9);
        color: #fff;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        min-width: 120px;
        touch-action: manipulation;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
      }
      
      .zoom-button:hover,
      .zoom-button:active {
        background: rgba(102, 102, 102, 0.9);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }
      
      .zoom-button:active {
        transform: translateY(0);
      }
      
      /* Mobile-specific styles */
      @media (max-width: 768px) {
        .container {
          max-width: 98vw;
          padding: 5px;
        }
        
        #KeyShotXR {
          border-radius: 8px;
          width: 100%;
          min-height: 85vw;
        }
        
        #controls {
          margin-top: 15px;
          gap: 12px;
        }
        
        .zoom-button {
          padding: 14px 20px;
          font-size: 18px;
          min-width: 100px;
          border-radius: 20px;
        }
      }
      
      /* Very small screens */
      @media (max-width: 480px) {
        .container {
          max-width: 100vw;
          padding: 5px;
        }
        
        #KeyShotXR {
          width: 100%;
          min-height: 90vw;
        }
        
        #controls {
          flex-direction: column;
          align-items: center;
          gap: 10px;
        }
        
        .zoom-button {
          width: 200px;
          max-width: 80vw;
        }
      }
      
      /* Landscape orientation on mobile */
      @media (max-height: 500px) and (orientation: landscape) {
        body {
          flex-direction: row;
          padding: 10px;
        }
        
        .container {
          flex-direction: row;
          max-width: none;
          width: 100%;
          height: 100%;
        }
        
        #KeyShotXR {
          max-height: 80vh;
          max-width: 60vw;
          margin-right: 20px;
        }
        
        #controls {
          flex-direction: column;
          margin-top: 0;
          margin-left: 20px;
          justify-content: center;
        }
      }
      
      /* Loading animation */
      .loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      
      .loading::after {
        content: '';
        width: 40px;
        height: 40px;
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top: 4px solid #fff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
    <script type="text/javascript" src="Delta 930 kaif.147/files/KeyShotXR.js"></script>
    <script type="text/javascript">
      var keyshotXR;
      
      function initKeyShotXR() {
        const nameOfDiv = "KeyShotXR";
        const folderName = "Delta 930 kaif.147";
        
        // Responsive viewport sizing - larger for mobile
        const container = document.querySelector('.container');
        const containerRect = container.getBoundingClientRect();
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        let viewerSize;
        if (isMobile) {
          viewerSize = Math.min(window.innerWidth * 0.95, window.innerHeight * 0.8);
        } else {
          viewerSize = Math.min(containerRect.width - 40, window.innerHeight * 0.6);
        }
        
        const viewPortWidth = viewerSize;
        const viewPortHeight = viewerSize;
        const backgroundColor = "transparent";
        const uCount = 20;
        const vCount = 20;
        const uWrap = true;
        const vWrap = false;
        
        // Adjusted sensitivity for mobile
        const uMouseSensitivity = isMobile ? -0.08 : -0.0555556;
        const vMouseSensitivity = isMobile ? 0.15 : 0.125;
        
        const uStartIndex = 8; // Start 2 frames to the left
        const vStartIndex = 10;
        const minZoom = 0.3;
        const maxZoom = 3;
        const rotationDamping = 0.96;
        const downScaleToBrowser = false;
        const addDownScaleGUIButton = false;
        const downloadOnInteraction = false;
        const imageExtension = "webp";
        const showLoading = true;
        const loadingIcon = "ba.png";
        const allowFullscreen = true;
        const uReverse = false;
        const vReverse = false;
        const hotspots = {};
        const isIBooksWidget = false;
        
        try {
          keyshotXR = new keyshotXR(
            nameOfDiv,
            folderName,
            viewPortWidth,
            viewPortHeight,
            backgroundColor,
            uCount,
            vCount,
            uWrap,
            vWrap,
            uMouseSensitivity,
            vMouseSensitivity,
            uStartIndex,
            vStartIndex,
            minZoom,
            maxZoom,
            rotationDamping,
            downScaleToBrowser,
            addDownScaleGUIButton,
            downloadOnInteraction,
            imageExtension,
            showLoading,
            loadingIcon,
            allowFullscreen,
            uReverse,
            vReverse,
            hotspots,
            isIBooksWidget
          );
        } catch (error) {
          console.error('KeyShotXR initialization error:', error);
        }
      }
      
      function zoomIn() {
        if (keyshotXR && keyshotXR.zoom) {
          keyshotXR.zoom(1.2);
        }
      }
      
      function zoomOut() {
        if (keyshotXR && keyshotXR.zoom) {
          keyshotXR.zoom(0.8);
        }
      }
      
      // Handle orientation changes
      function handleOrientationChange() {
        setTimeout(() => {
          if (keyshotXR && keyshotXR.resize) {
            keyshotXR.resize();
          }
        }, 500);
      }
      
      // Initialize when page loads
      window.addEventListener('load', initKeyShotXR);
      
      // Handle orientation changes
      window.addEventListener('orientationchange', handleOrientationChange);
      window.addEventListener('resize', handleOrientationChange);
      
      // Prevent context menu on mobile
      document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        return false;
      });
      
      // Prevent default touch behaviors that might interfere
      document.addEventListener('touchstart', function(e) {
        if (e.touches.length > 1) {
          e.preventDefault();
        }
      }, { passive: false });
      
      document.addEventListener('touchmove', function(e) {
        if (e.touches.length > 1) {
          e.preventDefault();
        }
      }, { passive: false });
    </script>
  </head>
  <body>
    <div class="container">
      <div id="KeyShotXR"></div>
      <div id="controls">
        <button class="zoom-button" onclick="zoomIn()" type="button">üîç+ Zoom In</button>
        <button class="zoom-button" onclick="zoomOut()" type="button">üîç‚àí Zoom Out</button>
      </div>
    </div>
  </body>
</html>
